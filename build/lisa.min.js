'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},RegexCatchers={'*':function _(){return'(.*?)'},number:function number(){return'(\\d+[.]?|\\d*\\.\\d+)'},integer:function integer(){return'(\\d+)'},short_time:function short_time(){return'((?:[01]?\\d|2[0-3])(?: *: *| +'+Lisa.thinksTo('HOURS_NAME')+' +)[0-5]\\d(?:| +'+Lisa.thinksTo('MINUTES_NAME')+'))'},time:function time(){return'((?:[01]?\\d|2[0-3])(?: *: *| +'+Lisa.thinksTo('HOURS_NAME')+' +)[0-5]\\d(?: *: *| +'+Lisa.thinksTo('MINUTES_NAME')+' +)[0-5]\\d))(?:|'+Lisa.thinksTo('SECONDS_NAME')+')'},short_date:function short_date(){return'((?:[1-9]|0[1-9]|[12]\\d|3[01])(?: *[\\/\\-\\.] *(?:[1-9]|0[1-9]|1[0-2]) *[\\/\\-\\.] *| +(?:'+Lisa.thinksTo('MONTHS').split(',').join('|')+'))'},date:function date(){return'((?:[1-9]|0[1-9]|[12]\\d|3[01])(?: *[\\/\\-\\.] *(?:[1-9]|0[1-9]|1[0-2]) *[\\/\\-\\.] *| +(?:'+Lisa.thinksTo('MONTHS').split(',').join('|')+') +)\\d{4})'}},Lisa=new function(){var a=this,b=document.createElement('div'),c={},d=[],f=[];this.escapeHtml=function(g){return g.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;')},this.format=function(g){return a.escapeHtml(g).replace(/\*(.*?)\*/g,'<strong>$1</strong>').replace(/_(.*?)_/g,'<em>$1</em>').replace(/~(.*?)~/g,'<del>$1</del>')},this.makeHandlerRegex=function(g){var h=1<arguments.length&&arguments[1]!==void 0&&arguments[1],i=[],j=new RegExp('^'+g.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,'\\$&').replace(/ /g,' +').replace(/\\\^(.*?)\\\^/g,function(k,l){if('\\*'===l&&(l='*'),!RegexCatchers.hasOwnProperty(l))throw new Error('[Lisa] Unknown catcher "'+l+'"');return i.push(l),RegexCatchers[l]()}).replace(/( \+)?\\\.$/,' *[\\.]?').replace(/( \+)?\\\?$/,' *[\\?]?').replace(/$/,'(?: *[!\\.])*')+'$','i');return h?[j,i]:j},this.understands=function(g,h){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(d.includes(g))throw new Error('[Lisa] Handler is already in use');if('string'==typeof h)h=new Function([],Reflect.ownKeys(i).map(function(k){return'Lisa.remembers("'+k+'","'+i[k].replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\$\^(\d|[1-9]\d+)/g,function(l,m){return'"+arguments['+m+']+"'})+'");'})+'return "'+h.replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\$\^(\d|[1-9]\d+)/g,function(k,l){return'"+arguments['+l+']+"'})+'"');else if('function'==typeof h)i&&function(){var k=h;h=function callback(){var m=arguments,o=!0,p=!1,q=void 0;try{for(var s,t,r=Reflect.ownKeys(i)[Symbol.iterator]();!(o=(s=r.next()).done);o=!0)t=s.value,Lisa.remembers(t,i[t].replace(/\$\^(\d|[1-9]\d+)/g,function(u,v){return m[v]}))}catch(t){p=!0,q=t}finally{try{!o&&r.return&&r.return()}finally{if(p)throw q}}return k.apply(a,arguments)}}();else throw new Error('[Lisa] Illegal handler\'s callback provided');var j=a.makeHandlerRegex(g);return f.push([j,h]),d.push(g),j},this.displayMessage=function(g,h,i){var j=document.createElement('div');j.setAttribute('class','message message-'+i),j.innerHTML='<strong>'+g+' : </strong>'+a.format(h),b.appendChild(j);var k=b.scrollHeight-b.scrollTop,l=setInterval(function(){return b.scrollTop++},Math.floor(2e3/k));setTimeout(function(){return clearInterval(l)},2e3)},this.remembers=function(g,h){if('string'!=typeof g||!g.length||{}[g])throw new Error('[Lisa] Illegal name provided for memory\'s cell');if(!['string','number','boolean'].includes('undefined'==typeof h?'undefined':_typeof(h)))throw new Error('[Lisa] Illegal value provided for memory\'s cell "'+g+'"');c[g]=h},this.thinksTo=function(g){return c[g]},this.forgets=function(g){if(!c.hasOwnProperty(g))throw new Error('[Lisa] The provided cell doesn\'t exist');var h=c[g];return delete c[g],h},this.says=function(g){return a.displayMessage('Lisa',g,'lisa')},this.hears=function(g){return a.displayMessage('You',g,'user')},this.does=function(g){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0;g=g.trim();var i,j=!0,k=!1,l=void 0;try{for(var o,p,m=f[Symbol.iterator]();!(j=(o=m.next()).done);j=!0)if(p=o.value,i=g.match(p[0])){var q=p[1].apply(a,i.slice(1).concat(i[0])),r=!1;return'number'==typeof q?q=r.toString():q&&q instanceof HTMLElement?(q=r.innerHTML,r=!0):'string'!=typeof q&&(q='Sorry, I encountered a problem. Please try again.'),h&&a.says(q,r),q}}catch(p){k=!0,l=p}finally{try{!j&&m.return&&m.return()}finally{if(k)throw l}}a.says('I didn\'t understand your request.',!0)},this.remembers('HOURS_NAME','hours'),this.remembers('MINUTES_NAME','minutes'),this.remembers('SECONDS_NAME','secondes'),this.remembers('MONTHS','january,february,march,april,may,june,july,august,september,october,november,december'),this.__defineGetter__('dom',function(){return b}),this.__defineGetter__('memory',function(){return JSON.parse(JSON.stringify(c))})};Lisa.dom.setAttribute('id','discuss'),document.body.appendChild(Lisa.dom);var input=document.createElement('input');input.setAttribute('id','input'),input.addEventListener('keydown',function(a){if(13===a.keyCode){if(!input.value.length)return;var b=input.value;input.value='',Lisa.hears(b),Lisa.does(b)}}),document.body.appendChild(input);
