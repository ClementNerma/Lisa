'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},RegexCatchers={'*':function _(){return'(.*?)'},number:function number(){return'(\\d+[.]?|\\d*\\.\\d+)'},integer:function integer(){return'(\\d+)'},short_time:function short_time(){return'((?:[01]?\\d|2[0-3])(?: *: *| +'+Lisa.thinksTo('HOURS_NAME')+' +)[0-5]\\d(?:| +'+Lisa.thinksTo('MINUTES_NAME')+'))'},time:function time(){return'((?:[01]?\\d|2[0-3])(?: *: *| +'+Lisa.thinksTo('HOURS_NAME')+' +)[0-5]\\d(?: *: *| +'+Lisa.thinksTo('MINUTES_NAME')+' +)[0-5]\\d))(?:|'+Lisa.thinksTo('SECONDS_NAME')+')'},short_date:function short_date(){return'((?:[1-9]|0[1-9]|[12]\\d|3[01])(?: *[\\/\\-\\.] *(?:[1-9]|0[1-9]|1[0-2]) *[\\/\\-\\.] *| +(?:'+Lisa.thinksTo('MONTHS').split(',').join('|')+'))'},date:function date(){return'((?:[1-9]|0[1-9]|[12]\\d|3[01])(?: *[\\/\\-\\.] *(?:[1-9]|0[1-9]|1[0-2]) *[\\/\\-\\.] *| +(?:'+Lisa.thinksTo('MONTHS').split(',').join('|')+') +)\\d{4})'}},Lisa=new function(){var b=this,c=arguments,d=document.createElement('div'),f={},g=[],h=[];function a(j){var k=1<arguments.length&&arguments[1]!==void 0?arguments[1]:2;return'0'.repeat(k-j.length)+j}this.escapeHtml=function(j){return j.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;')},this.getStandard=function(j,k){if(!RegexCatchers.hasOwnProperty(k))throw new Error('[Lisa] Unknown catcher "'+k+'"');if(['*','number','integer'].includes(k))return j;var l;switch(k){case'short_time':return j.replace(/^([0-9]+).*([0-9]+)$/,function(r,s,t){return a(s)+':'+a(t)});case'time':return j.replace(/^([0-9]+).*([0-9]+).*([0-9]+)$/,a($1)+':'+a($2)+':'+a($3));case'short_date':l=Lisa.thinksTo('MONTHS').split(',');for(var o,m=function _loop(r){if(j.includes(l))return{v:j.replace(/\d+/,function(s){return a(s)+'/'+a(r.toString())})}},r=0;r<l.length;r++)if(o=m(r),'object'===('undefined'==typeof o?'undefined':_typeof(o)))return o.v;return j.replace(/(\d+).*?(\d+)/,function(r,s,t){return a(s)+'/'+a(t)});case'date':l=Lisa.thinksTo('MONTHS').split(',');for(var q,p=function _loop2(r){if(j.includes(l[r]))return{v:j.replace(/(\d+).*?(\d+)/,function(s,t,u){return a(t)+'/'+a((r+1).toString())+'/'+a(u,4)})}},r=0;r<l.length;r++)if(q=p(r),'object'===('undefined'==typeof q?'undefined':_typeof(q)))return q.v;return j.replace(/(\d+).*?(\d+).*?(\d+)/,function(r,s,t,u){return a(s)+'/'+a(t)+'/'+a(u,4)});default:throw new Error('[Lisa] [BUG] Unreferenced catcher "'+k+'"');}},this.format=function(j){return b.escapeHtml(j).replace(/\*(.*?)\*/g,'<strong>$1</strong>').replace(/_(.*?)_/g,'<em>$1</em>').replace(/~(.*?)~/g,'<del>$1</del>')},this.makeHandlerRegex=function(j){var k=1<arguments.length&&arguments[1]!==void 0&&arguments[1],l=[],m=new RegExp('^'+j.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,'\\$&').replace(/ /g,' +').replace(/\\\^(.*?)\\\^/g,function(o,p){if('\\*'===p&&(p='*'),!RegexCatchers.hasOwnProperty(p))throw new Error('[Lisa] Unknown catcher "'+p+'"');return l.push(p),RegexCatchers[p]()}).replace(/( \+)?\\\.$/,' *[\\.]?').replace(/( \+)?\\\?$/,' *[\\?]?').replace(/$/,'(?: *[!\\.])*')+'$','i');return k?[m,l]:m},this.understands=function(j,k){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},m=arguments[3];if(g.includes(j))throw new Error('[Lisa] Handler is already in use');if('string'==typeof k)k=new Function([],Reflect.ownKeys(l).map(function(u){return'Lisa.remembers("'+u+'","'+l[u].replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\$\^(\d|[1-9]\d+)/g,function(v,w){return'"+arguments['+w+']+"'})+'");'})+'return "'+k.replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\$\^(\d|[1-9]\d+)/g,function(u,v){return'"+arguments['+v+']+"'})+'"');else if('function'==typeof k)l&&function(){var u=k;k=function callback(){var w=arguments,x=!0,y=!1,z=void 0;try{for(var B,C,A=Reflect.ownKeys(l)[Symbol.iterator]();!(x=(B=A.next()).done);x=!0)C=B.value,Lisa.remembers(C,l[C].replace(/\$\^(\d|[1-9]\d+)/g,function(D,E){return w[E]}))}catch(C){y=!0,z=C}finally{try{!x&&A.return&&A.return()}finally{if(y)throw z}}return u.apply(b,arguments)}}();else throw new Error('[Lisa] Illegal handler\'s callback provided');var o=b.makeHandlerRegex(j,!0);if(m){if(!Array.isArray(m))throw new Error('[Lisa] Illegal help text argument provided');if(m.length!==o[1].length)throw new Error('[Lisa] Insufficient help for parameters in handler "'+j+'"');var p=!0,q=!1,r=void 0;try{for(var t,u,s=m[Symbol.iterator]();!(p=(t=s.next()).done);p=!0)if(u=t.value,!['string','function'].includes('undefined'==typeof u?'undefined':_typeof(u)))throw new Error('[Lisa] Illegal help text given for handler "'+j+'"')}catch(u){q=!0,r=u}finally{try{!p&&s.return&&s.return()}finally{if(q)throw r}}}return h.push([o[0],o[1],k,m]),g.push(j),o[0]},this.displayMessage=function(j,k,l){var m=document.createElement('div');m.setAttribute('class','message message-'+l),m.innerHTML='<strong>'+j+' : </strong>'+b.format(k),d.appendChild(m);var o=d.scrollHeight-d.scrollTop,p=setInterval(function(){return d.scrollTop++},Math.floor(2e3/o));setTimeout(function(){return clearInterval(p)},2e3)},this.helpsAbout=function(j){var k=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(!g.includes(j))throw new Error('[Lisa] Unknown handler "'+j+'"');var l=h[g.indexOf(j)][3];if(!l)return!1;if(k)return l.slice(0);var m=0;return j.replace(/\^(.*?)\^/g,function(){return'['+l[m++]+']'})},this.remembers=function(j,k){if('string'!=typeof j||!j.length||{}[j])throw new Error('[Lisa] Illegal name provided for memory\'s cell');if(!['string','number','boolean'].includes('undefined'==typeof k?'undefined':_typeof(k)))throw new Error('[Lisa] Illegal value provided for memory\'s cell "'+j+'"');f[j]=k},this.thinksTo=function(j){return f[j]},this.forgets=function(j){if(!f.hasOwnProperty(j))throw new Error('[Lisa] The provided cell doesn\'t exist');var k=f[j];return delete f[j],k},this.says=function(j){return b.displayMessage('Lisa',j,'lisa')},this.hears=function(j){return b.displayMessage('You',j,'user')},this.does=function(j){var k=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0;j=j.trim();var l,m=!0,o=!1,p=void 0;try{for(var r,s,q=h[Symbol.iterator]();!(m=(r=q.next()).done);m=!0)if(s=r.value,l=j.match(s[0])){for(var t={whole:j,originalRequest:c[0],caught:l.slice(1),standard:[],handler:s,originalHandler:g[h.indexOf(s)],display:!!k},w=0;w<s[1].length;w++)t.standard.push(b.getStandard(l[w+1],s[1][w]));var u=s[2].call(b,t),v=!1;return'number'==typeof u?u=v.toString():u&&u instanceof HTMLElement?(u=v.innerHTML,v=!0):'string'!=typeof u&&(u='Sorry, I encountered a problem. Please try again.'),k&&b.says(u,v),u}}catch(s){o=!0,p=s}finally{try{!m&&q.return&&q.return()}finally{if(o)throw p}}b.says('I didn\'t understand your request.',!0)},this.remembers('HOURS_NAME','hours'),this.remembers('MINUTES_NAME','minutes'),this.remembers('SECONDS_NAME','secondes'),this.remembers('MONTHS','january,february,march,april,may,june,july,august,september,october,november,december'),this.__defineGetter__('dom',function(){return d}),this.__defineGetter__('memory',function(){return JSON.parse(JSON.stringify(f))})};Lisa.dom.setAttribute('id','discuss'),document.body.appendChild(Lisa.dom);var input=document.createElement('input');input.setAttribute('id','input'),input.addEventListener('keydown',function(a){if(13===a.keyCode){if(!input.value.length)return;var b=input.value;input.value='',Lisa.hears(b),Lisa.does(b)}}),document.body.appendChild(input);
