'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},RegexCatchers={'*':function _(){return'(.*?)'},number:function number(){return'(\\d+[.]?|\\d*\\.\\d+)'},integer:function integer(){return'(\\d+)'},short_time:function short_time(){return'((?:[01]?\\d|2[0-3])(?: *: *| +'+Lisa.thinksTo('HOURS_NAME')+' +)[0-5]\\d(?:| +'+Lisa.thinksTo('MINUTES_NAME')+'))'},time:function time(){return'((?:[01]?\\d|2[0-3])(?: *: *| +'+Lisa.thinksTo('HOURS_NAME')+' +)[0-5]\\d(?: *: *| +'+Lisa.thinksTo('MINUTES_NAME')+' +)[0-5]\\d))(?:|'+Lisa.thinksTo('SECONDS_NAME')+')'},short_date:function short_date(){return'((?:[1-9]|0[1-9]|[12]\\d|3[01])(?: *[\\/\\-\\.] *(?:[1-9]|0[1-9]|1[0-2]) *[\\/\\-\\.] *| +(?:'+Lisa.thinksTo('MONTHS').split(',').join('|')+'))'},date:function date(){return'((?:[1-9]|0[1-9]|[12]\\d|3[01])(?: *[\\/\\-\\.] *(?:[1-9]|0[1-9]|1[0-2]) *[\\/\\-\\.] *| +(?:'+Lisa.thinksTo('MONTHS').split(',').join('|')+') +)\\d{4})'}},Lisa=new function(){var b=this,c=document.createElement('div'),d={},f=[],g=[];function a(h){var j=1<arguments.length&&arguments[1]!==void 0?arguments[1]:2;return'0'.repeat(j-h.length)+h}this.escapeHtml=function(h){return h.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;')},this.getStandard=function(h,j){if(!RegexCatchers.hasOwnProperty(j))throw new Error('[Lisa] Unknown catcher "'+j+'"');if(['*','number','integer'].includes(j))return h;var k;switch(j){case'short_time':return h.replace(/^([0-9]+).*([0-9]+)$/,function(q,r,s){return a(r)+':'+a(s)});case'time':return h.replace(/^([0-9]+).*([0-9]+).*([0-9]+)$/,a($1)+':'+a($2)+':'+a($3));case'short_date':k=Lisa.thinksTo('MONTHS').split(',');for(var m,l=function _loop(q){if(h.includes(k))return{v:h.replace(/\d+/,function(r){return a(r)+'/'+a(q.toString())})}},q=0;q<k.length;q++)if(m=l(q),'object'===('undefined'==typeof m?'undefined':_typeof(m)))return m.v;return h.replace(/(\d+).*?(\d+)/,function(q,r,s){return a(r)+'/'+a(s)});case'date':k=Lisa.thinksTo('MONTHS').split(',');for(var p,o=function _loop2(q){if(h.includes(k[q]))return{v:h.replace(/(\d+).*?(\d+)/,function(r,s,t){return a(s)+'/'+a((q+1).toString())+'/'+a(t,4)})}},q=0;q<k.length;q++)if(p=o(q),'object'===('undefined'==typeof p?'undefined':_typeof(p)))return p.v;return h.replace(/(\d+).*?(\d+).*?(\d+)/,function(q,r,s,t){return a(r)+'/'+a(s)+'/'+a(t,4)});default:throw new Error('[Lisa] [BUG] Unreferenced catcher "'+j+'"');}},this.format=function(h){return b.escapeHtml(h).replace(/\*(.*?)\*/g,'<strong>$1</strong>').replace(/_(.*?)_/g,'<em>$1</em>').replace(/~(.*?)~/g,'<del>$1</del>')},this.makeHandlerRegex=function(h){var j=1<arguments.length&&arguments[1]!==void 0&&arguments[1],k=[],l=new RegExp('^'+h.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,'\\$&').replace(/ /g,' +').replace(/\\\^(.*?)\\\^/g,function(m,o){if('\\*'===o&&(o='*'),!RegexCatchers.hasOwnProperty(o))throw new Error('[Lisa] Unknown catcher "'+o+'"');return k.push(o),RegexCatchers[o]()}).replace(/( \+)?\\\.$/,' *[\\.]?').replace(/( \+)?\\\?$/,' *[\\?]?').replace(/$/,'(?: *[!\\.])*')+'$','i');return j?[l,k]:l},this.understands=function(h,j){var k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(f.includes(h))throw new Error('[Lisa] Handler is already in use');if('string'==typeof j)j=new Function([],Reflect.ownKeys(k).map(function(m){return'Lisa.remembers("'+m+'","'+k[m].replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\$\^(\d|[1-9]\d+)/g,function(o,p){return'"+arguments['+p+']+"'})+'");'})+'return "'+j.replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\$\^(\d|[1-9]\d+)/g,function(m,o){return'"+arguments['+o+']+"'})+'"');else if('function'==typeof j)k&&function(){var m=j;j=function callback(){var p=arguments,q=!0,r=!1,s=void 0;try{for(var u,v,t=Reflect.ownKeys(k)[Symbol.iterator]();!(q=(u=t.next()).done);q=!0)v=u.value,Lisa.remembers(v,k[v].replace(/\$\^(\d|[1-9]\d+)/g,function(w,x){return p[x]}))}catch(v){r=!0,s=v}finally{try{!q&&t.return&&t.return()}finally{if(r)throw s}}return m.apply(b,arguments)}}();else throw new Error('[Lisa] Illegal handler\'s callback provided');var l=b.makeHandlerRegex(h,!0);return g.push([l[0],l[1],j]),f.push(h),l[0]},this.displayMessage=function(h,j,k){var l=document.createElement('div');l.setAttribute('class','message message-'+k),l.innerHTML='<strong>'+h+' : </strong>'+b.format(j),c.appendChild(l);var m=c.scrollHeight-c.scrollTop,o=setInterval(function(){return c.scrollTop++},Math.floor(2e3/m));setTimeout(function(){return clearInterval(o)},2e3)},this.remembers=function(h,j){if('string'!=typeof h||!h.length||{}[h])throw new Error('[Lisa] Illegal name provided for memory\'s cell');if(!['string','number','boolean'].includes('undefined'==typeof j?'undefined':_typeof(j)))throw new Error('[Lisa] Illegal value provided for memory\'s cell "'+h+'"');d[h]=j},this.thinksTo=function(h){return d[h]},this.forgets=function(h){if(!d.hasOwnProperty(h))throw new Error('[Lisa] The provided cell doesn\'t exist');var j=d[h];return delete d[h],j},this.says=function(h){return b.displayMessage('Lisa',h,'lisa')},this.hears=function(h){return b.displayMessage('You',h,'user')},this.does=function(h){var j=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0;h=h.trim();var k,l=!0,m=!1,o=void 0;try{for(var q,r,p=g[Symbol.iterator]();!(l=(q=p.next()).done);l=!0)if(r=q.value,k=h.match(r[0])){for(var s={whole:k[0],caught:k.slice(1),standard:[]},v=0;v<r[1].length;v++)s.standard.push(b.getStandard(k[v+1],r[1][v]));var t=r[2].call(b,s),u=!1;return'number'==typeof t?t=u.toString():t&&t instanceof HTMLElement?(t=u.innerHTML,u=!0):'string'!=typeof t&&(t='Sorry, I encountered a problem. Please try again.'),j&&b.says(t,u),t}}catch(r){m=!0,o=r}finally{try{!l&&p.return&&p.return()}finally{if(m)throw o}}b.says('I didn\'t understand your request.',!0)},this.remembers('HOURS_NAME','hours'),this.remembers('MINUTES_NAME','minutes'),this.remembers('SECONDS_NAME','secondes'),this.remembers('MONTHS','january,february,march,april,may,june,july,august,september,october,november,december'),this.__defineGetter__('dom',function(){return c}),this.__defineGetter__('memory',function(){return JSON.parse(JSON.stringify(d))})};Lisa.dom.setAttribute('id','discuss'),document.body.appendChild(Lisa.dom);var input=document.createElement('input');input.setAttribute('id','input'),input.addEventListener('keydown',function(a){if(13===a.keyCode){if(!input.value.length)return;var b=input.value;input.value='',Lisa.hears(b),Lisa.does(b)}}),document.body.appendChild(input);
