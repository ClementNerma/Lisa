'use strict';var Lisa=new function(a){var b=this;if(a&&!(a instanceof HTMLDivElement))throw new Error('[Lisa] Invalid DOM area provided');var c=a||document.createElement('div'),d=[],f=[];this.escapeHtml=function(g){return g.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;')},this.format=function(g){return b.escapeHtml(g).replace(/\*(.*?)\*/g,'<strong>$1</strong>').replace(/_(.*?)_/g,'<em>$1</em>').replace(/~(.*?)~/g,'<del>$1</del>')},this.makeHandlerRegex=function(g){return new RegExp('^'+g.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,'\\$&').replace(/ /g,' +').replace(/\\\*/g,'(.*?)').replace(/( \+)?\\\.$/,' *[\\.]?').replace(/( \+)?\\\?$/,' *[\\?]?').replace(/$/,'( *[!|\\.])*')+'$','i')},this.register=function(g,h){if(d.includes(g))throw new Error('[Lisa] Handler is already in use');var i=b.makeHandlerRegex(g);return f.push([i,h]),d.push(g),i},this.says=function(g){var h=document.createElement('div');h.setAttribute('class','message message-lisa'),h.innerHTML='<strong>Lisa : </strong>'+b.format(g),c.appendChild(h),b.scrollToEnd()},this.hears=function(g){var h=document.createElement('div');h.setAttribute('class','message message-user'),h.innerHTML='<strong>You : </strong>'+b.format(g),c.appendChild(h),b.scrollToEnd()},this.does=function(g){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0;g=g.trim();var i,j=!0,k=!1,l=void 0;try{for(var n,o,m=f[Symbol.iterator]();!(j=(n=m.next()).done);j=!0)if(o=n.value,i=g.match(o[0])){var p=o[1].apply(b,i.slice(1).concat(i[0])),q=!1;return'number'==typeof p?p=q.toString():p&&p instanceof HTMLElement?(p=q.innerHTML,q=!0):'string'!=typeof p&&(p='Sorry, I encountered a problem. Please try again.'),h&&b.says(p,q),p}}catch(o){k=!0,l=o}finally{try{!j&&m.return&&m.return()}finally{if(k)throw l}}b.says('I didn\'t understand your request.',!0)},this.scrollToEnd=function(){var g=c.scrollHeight-c.scrollTop,h=setInterval(function(){return c.scrollTop++},Math.floor(2e3/g));setTimeout(function(){return clearInterval(h)},2e3)},this.__defineGetter__('dom',function(){return c})};Lisa.dom.setAttribute('id','discuss'),document.body.appendChild(Lisa.dom);var input=document.createElement('input');input.setAttribute('id','input'),input.addEventListener('keydown',function(a){if(13===a.keyCode){if(!input.value.length)return;var b=input.value;input.value='',Lisa.hears(b),Lisa.does(b)}}),document.body.appendChild(input);
