'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},RegexCatchers={'*':function _(){return'(.*?)'},number:function number(){return'(\\d+[.]?|\\d*\\.\\d+)'},integer:function integer(){return'(\\d+)'},short_time:function short_time(){return'((?:[01]?\\d|2[0-3])(?: *: *| +'+Lisa.thinksTo('HOURS_NAME')+' +)[0-5]\\d(?:| +'+Lisa.thinksTo('MINUTES_NAME')+'))'},time:function time(){return'((?:[01]?\\d|2[0-3])(?: *: *| +'+Lisa.thinksTo('HOURS_NAME')+' +)[0-5]\\d(?: *: *| +'+Lisa.thinksTo('MINUTES_NAME')+' +)[0-5]\\d))(?:|'+Lisa.thinksTo('SECONDS_NAME')+')'},short_date:function short_date(){return'((?:[1-9]|0[1-9]|[12]\\d|3[01])(?: *[\\/\\-\\.] *(?:[1-9]|0[1-9]|1[0-2]) *[\\/\\-\\.] *| +(?:'+Lisa.thinksTo('MONTHS').split(',').join('|')+'))'},date:function date(){return'((?:[1-9]|0[1-9]|[12]\\d|3[01])(?: *[\\/\\-\\.] *(?:[1-9]|0[1-9]|1[0-2]) *[\\/\\-\\.] *| +(?:'+Lisa.thinksTo('MONTHS').split(',').join('|')+') +)\\d{4})'}},Lisa=new function(){var b=this,c=document.createElement('div'),d={},f=[],g=[];function a(h){var j=1<arguments.length&&arguments[1]!==void 0?arguments[1]:2;return'0'.repeat(j-h.length)+h}this.escapeHtml=function(h){return h.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;')},this.getStandard=function(h,j){if(!RegexCatchers.hasOwnProperty(j))throw new Error('[Lisa] Unknown catcher "'+j+'"');if(['*','number','integer'].includes(j))return h;var k;switch(j){case'short_time':return h.replace(/^([0-9]+).*([0-9]+)$/,function(q,r,s){return a(r)+':'+a(s)});case'time':return h.replace(/^([0-9]+).*([0-9]+).*([0-9]+)$/,a($1)+':'+a($2)+':'+a($3));case'short_date':k=Lisa.thinksTo('MONTHS').split(',');for(var m,l=function _loop(q){if(h.includes(k))return{v:h.replace(/\d+/,function(r){return a(r)+'/'+a(q.toString())})}},q=0;q<k.length;q++)if(m=l(q),'object'===('undefined'==typeof m?'undefined':_typeof(m)))return m.v;return h.replace(/(\d+).*?(\d+)/,function(q,r,s){return a(r)+'/'+a(s)});case'date':k=Lisa.thinksTo('MONTHS').split(',');for(var p,o=function _loop2(q){if(h.includes(k[q]))return{v:h.replace(/(\d+).*?(\d+)/,function(r,s,t){return a(s)+'/'+a((q+1).toString())+'/'+a(t,4)})}},q=0;q<k.length;q++)if(p=o(q),'object'===('undefined'==typeof p?'undefined':_typeof(p)))return p.v;return h.replace(/(\d+).*?(\d+).*?(\d+)/,function(q,r,s,t){return a(r)+'/'+a(s)+'/'+a(t,4)});default:throw new Error('[Lisa] [BUG] Unreferenced catcher "'+j+'"');}},this.format=function(h){return b.escapeHtml(h).replace(/\*(.*?)\*/g,'<strong>$1</strong>').replace(/_(.*?)_/g,'<em>$1</em>').replace(/~(.*?)~/g,'<del>$1</del>')},this.makeHandlerRegex=function(h){var j=1<arguments.length&&arguments[1]!==void 0&&arguments[1],k=[],l=new RegExp('^'+h.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,'\\$&').replace(/ /g,' +').replace(/\\\^(.*?)\\\^/g,function(m,o){if('\\*'===o&&(o='*'),!RegexCatchers.hasOwnProperty(o))throw new Error('[Lisa] Unknown catcher "'+o+'"');return k.push(o),RegexCatchers[o]()}).replace(/( \+)?\\\.$/,' *[\\.]?').replace(/( \+)?\\\?$/,' *[\\?]?').replace(/$/,'(?: *[!\\.])*')+'$','i');return j?[l,k]:l},this.understands=function(h,j){var k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},l=arguments[3];if(f.includes(h))throw new Error('[Lisa] Handler is already in use');if('string'==typeof j)j=new Function([],Reflect.ownKeys(k).map(function(t){return'Lisa.remembers("'+t+'","'+k[t].replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\$\^(\d|[1-9]\d+)/g,function(u,v){return'"+arguments[0].formatted['+v+']+"'}).replace(/\$_(\d|[1-9]\d+)/g,function(u,v){return'"+arguments[0].caught['+v+']+"'})+'");'})+'return "'+j.replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\$\^(\d|[1-9]\d+)/g,function(t,u){return'"+arguments[0].formatted['+u+']+"'}).replace(/\$_(\d|[1-9]\d+)/g,function(t,u){return'"+arguments[0].caught['+u+']+"'})+'"');else if('function'==typeof j)k&&function(){var t=j;j=function callback(v){var w=!0,x=!1,y=void 0;try{for(var A,B,z=Reflect.ownKeys(k)[Symbol.iterator]();!(w=(A=z.next()).done);w=!0)B=A.value,Lisa.remembers(B,k[B].replace(/\$\^(\d|[1-9]\d+)/g,function(C,D){return v.formatted[D]}).replace(/\$_(\d|[1-9]\d+)/g,function(C,D){return v.caught[D]}))}catch(B){x=!0,y=B}finally{try{!w&&z.return&&z.return()}finally{if(x)throw y}}return console.log(t.toString()),t.call(b,v)}}();else throw new Error('[Lisa] Illegal handler\'s callback provided');var m=b.makeHandlerRegex(h,!0);if(l){if(!Array.isArray(l))throw new Error('[Lisa] Illegal help text argument provided');if(l.length!==m[1].length)throw new Error('[Lisa] Insufficient help for parameters in handler "'+h+'"');var o=!0,p=!1,q=void 0;try{for(var s,t,r=l[Symbol.iterator]();!(o=(s=r.next()).done);o=!0)if(t=s.value,!['string','function'].includes('undefined'==typeof t?'undefined':_typeof(t)))throw new Error('[Lisa] Illegal help text given for handler "'+h+'"')}catch(t){p=!0,q=t}finally{try{!o&&r.return&&r.return()}finally{if(p)throw q}}}return g.push([m[0],m[1],j,l||null]),f.push(h),m[0]},this.displayMessage=function(h,j,k){var l=document.createElement('div');l.setAttribute('class','message message-'+k),l.innerHTML='<strong>'+h+' : </strong>'+b.format(j),c.appendChild(l);var m=c.scrollHeight-c.scrollTop,o=setInterval(function(){return c.scrollTop++},Math.floor(2e3/m));setTimeout(function(){return clearInterval(o)},2e3)},this.helpsAbout=function(h){var j=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(!f.includes(h))throw new Error('[Lisa] Unknown handler "'+h+'"');var k=g[f.indexOf(h)][3];if(!k)return!1;if(j)return k.slice(0);var l=0;return h.replace(/\^(.*?)\^/g,function(){return'['+k[l++]+']'})},this.remembers=function(h,j){if('string'!=typeof h||!h.length||{}[h])throw new Error('[Lisa] Illegal name provided for memory\'s cell');if(!['string','number','boolean'].includes('undefined'==typeof j?'undefined':_typeof(j)))throw new Error('[Lisa] Illegal value provided for memory\'s cell "'+h+'"');d[h]=j},this.thinksTo=function(h){return d[h]},this.forgets=function(h){if(!d.hasOwnProperty(h))throw new Error('[Lisa] The provided cell doesn\'t exist');var j=d[h];return delete d[h],j},this.says=function(h){return b.displayMessage('Lisa',h,'lisa')},this.hears=function(h){return b.displayMessage('You',h,'user')},this.does=function(h){var j=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0,k=h;h=h.trim();var l,m=!0,o=!1,p=void 0;try{for(var r,s,q=g[Symbol.iterator]();!(m=(r=q.next()).done);m=!0)if(s=r.value,l=h.match(s[0])){for(var t={request:h,requestWithSpaces:k,caught:l.slice(1),formatted:[],handlerRegex:s[0],catchers:s[1],callback:s[2],help:s[3],handler:f[g.indexOf(s)],display:!!j},w=0;w<s[1].length;w++)t.formatted.push(b.getStandard(l[w+1],s[1][w]));var u=s[2].call(b,t),v=!1;return'number'==typeof u?u=v.toString():u&&u instanceof HTMLElement?(u=v.innerHTML,v=!0):'string'!=typeof u&&(u='Sorry, I encountered a problem. Please try again.'),j&&b.says(u,v),u}}catch(s){o=!0,p=s}finally{try{!m&&q.return&&q.return()}finally{if(o)throw p}}b.says('I didn\'t understand your request.',!0)},this.remembers('HOURS_NAME','hours'),this.remembers('MINUTES_NAME','minutes'),this.remembers('SECONDS_NAME','secondes'),this.remembers('MONTHS','january,february,march,april,may,june,july,august,september,october,november,december'),this.__defineGetter__('dom',function(){return c}),this.__defineGetter__('memory',function(){return JSON.parse(JSON.stringify(d))})};Lisa.dom.setAttribute('id','discuss'),document.body.appendChild(Lisa.dom);var input=document.createElement('input');input.setAttribute('id','input'),input.addEventListener('keydown',function(a){if(13===a.keyCode){if(!input.value.length)return;var b=input.value;input.value='',Lisa.hears(b),Lisa.does(b)}}),document.body.appendChild(input);
